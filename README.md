# 海凪ひよりちゃんbot
うちのまいこ先生原作、スローループの登場キャラクター「海凪ひよりちゃん」を現代科学の力で召喚するプロジェクトです。
最終更新日(2020.7.6)
## 現在の仕様
### Twitter
1. @mHiyori0104にリプライをされたらそれをトリガーにして、マルコフ連鎖を用いてそれっぽい文章生成し、それを発信者へ返信する。
1. フォローをもらったら返す。
1. 「天気を教えて、ひよりちゃん」と@mHiyori0104にリプライすることで現在の横須賀市の天気を返す
1. 一時間に一回マルコフ連鎖で作成したツイートをする。
1. 特定のキーワード（現在は、「MUGI TEA」,「キスしていい？」）に反応する。
1. 特定のキーワードを必要とする物について、ある程度の表記揺れをカバー。？を多少多くしたり、スペースをなくしたり、逆に多くしたりしても大丈夫。あとスペースと？は全角半角どちらもOK。
1. グッズイベント情報を集めるリストにあるアカウントがスローループ関係のツイートをしたらリツイート
1. 任意の特定のキーワードについて任意の反応を返す設定を公開。管理画面からどうぞ（後述）
1. クイズ機能 クイズを毎時15分に発出。クイズは管理画面より追加可能
1. きらファンのデイリーをリマインドする機能

デイリー通知をONに設定

1.ひよちbotをフォローしている場合は一度フォローを外したのちに再フォローする。またフォローしていない場合はフォローする（自動でフォロバされます）

2.ひよちにDMで「きらファンデイリー設定お願い」と送信する。

3.返答が返ってきたら正常にONに設定されています。

デイリー通知をOFFに設定

1.ひよちにDMで「きらファンデイリー設定お願い」と送信する。

2.返答が返ってきたら正常にOFFに設定されています。

### discord
1. @uma401からツイートをリプ（自己リプは例外）とRTを除いたものをdiscordのchに投げる。
2. グッズ情報ツイートをdiscordのchに投げる。

## 管理画面
https://bot.nullab.xyz/admin
ID slowloop_fun
PASS slowloop0324
## 今後
機械学習を使い精度の良い会話的なことをさせる。
→DMのやりとりも実装できたらただしコーパスの不足で実現は相当先になる可能性。

LINEでひよりちゃんを攻略するギャルゲーとか実装したい。ただシナリオをかく自信がない＆そもそも自分がプレイしたいので、シナリオを外部ファイル化し、誰でもシナリオを生成するツールなど整備し、誰かに書かせる腹積り。シナリオライターの報酬額などいろいろ考えた上で、最終的には動くのでだいぶ先の話になるかと。

## フォークとか
好きにやってください。小春botとか恋ちゃんbotとか誰か運用して欲しいですね。

あと自分で言うのもなんですが、おそらく現行のtwitterAPIにdjangoで対応させた初めての例（ネットに上がっているものだったら）なので、django使いの人に参考になれたらと思います。

それと特定のキーワードについては管理画面で簡単に追加ができるので、将来的には開放するのもありかなと。セキュリティや個人情報の扱いにも関わってくるので、その辺りを整備できたら多分やります。
## 技術的なこと
### 環境構築
Python3.6.8で動作確認済み

各種パッケージはrequirements.txtに

ただしmarkov chainで形態素分析にMeCabを利用しているため、そこは各環境でインストールをお願いいたします（逆に言えば使用しない開発であればそれ関係のライブラリは不要、というかほとんど使用しない開発がメインだと思います)

## 開発について
developからcloneして、featureブランチを切ってなんかそれっぽいものができたらpull request出してください。masterについてはpushすると本番環境にも上がるのでpush厳禁

なにかあったらissueでもtwitterでも構わないので、ご連絡ください。


